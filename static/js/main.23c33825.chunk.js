(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{141:function(e,t,a){e.exports=a(312)},171:function(e,t,a){},250:function(e,t,a){},310:function(e,t,a){},311:function(e,t,a){},312:function(e,t,a){"use strict";a.r(t);var n=a(26),r=a.n(n),s=a(0),i=a.n(s),c=a(19),u=a(20),l=a(22),o=a(21),m=a(23),d=a(83),h=a.n(d),p=a(129),g=a(130),f=a.n(g),b=function(e){return e.users.users},E=function(e){return e.users.isFetching},y=function(e){return e.users.usersTotal},v=function(e){return e.users.loadedPages},M=a(31),k=a(42),O=a(134),C=a.n(O),j=(a(171),a(48)),w=a.n(j),x=a(59),_=a.n(x),S=a(60),P=a.n(S),T=a(61),D=a.n(T),L=a(62),N=a.n(L),A=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).state={page:1,perPage:5},a.handleFirstPageButtonClick=function(){a.loadPage(1)},a.handleBackButtonClick=function(){var e=a.state.page-1;a.loadPage(e)},a.handleNextButtonClick=function(){var e=a.state.page+1;a.loadPage(e)},a.handleLastPageButtonClick=function(){var e=a.props.usersTotal,t=Math.ceil(e/a.state.perPage);a.loadPage(t)},a.loadPage=function(e){var t=a.props,n=t.pages,r=t.getUsersList;n.includes(e)||r(e),a.setState({page:e})},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.users,a=e.isFetching,n=e.getUsersList;0!==t.length||a||n(1)}},{key:"render",value:function(){var e=this.props,t=e.users,a=e.usersTotal,n=e.pages;return i.a.createElement("section",{className:"UserList"},i.a.createElement("h2",{className:"UserList__title"},"Users"),t.slice(n.indexOf(this.state.page)*this.state.perPage,n.indexOf(this.state.page)*this.state.perPage+this.state.perPage).map(function(e){var t=e.id,a=e.first_name,n=e.last_name;return i.a.createElement(C.a,{component:function(e){return i.a.createElement(k.b,Object.assign({},e,{to:"/users/".concat(t)}))},key:t,color:"primary",className:"UserList__link"},a," ",n)}),i.a.createElement("nav",{className:"UserList__pagination"},i.a.createElement(w.a,{onClick:this.handleFirstPageButtonClick,disabled:1===this.state.page,"aria-label":"First Page"},i.a.createElement(_.a,null)),i.a.createElement(w.a,{onClick:this.handleBackButtonClick,disabled:1===this.state.page,"aria-label":"Previous Page"},i.a.createElement(P.a,null)),i.a.createElement(w.a,{onClick:this.handleNextButtonClick,disabled:0===a||this.state.page===Math.ceil(a/this.state.perPage),"aria-label":"Next Page"},i.a.createElement(D.a,null)),i.a.createElement(w.a,{onClick:this.handleLastPageButtonClick,disabled:0===a||this.state.page===Math.ceil(a/this.state.perPage),"aria-label":"Last Page"},i.a.createElement(N.a,null))))}}]),t}(s.Component),I={getUsersList:function(e){return function(){var t=Object(p.a)(h.a.mark(function t(a){var n,r,s;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"USER_LIST_FETCHING",payload:!0}),t.next=4,f.a.get("https://reqres.in/api/users?per_page=5&page=".concat(e));case 4:if(200===(n=t.sent).status){t.next=7;break}return t.abrupt("return",a({type:"USER_LIST_FETCHING",payload:!1}));case 7:r=n.data.data,s=n.data.total,a({type:"USER_LIST_SET",payload:{users:r,usersTotal:s,loadedPages:+e}}),t.next=16;break;case 13:return t.prev=13,t.t0=t.catch(0),t.abrupt("return",a({type:"USER_LIST_FETCHING",payload:!1}));case 16:case"end":return t.stop()}},t,null,[[0,13]])}));return function(e){return t.apply(this,arguments)}}()}},R=Object(M.b)(function(e){return{users:b(e),isFetching:E(e),usersTotal:y(e),pages:v(e)}},I)(A),B=a(17),F=a(10),U=a.n(F),W=function(e,t){return U()(e).isSame(U()(t))?0:U()(e).isBefore(U()(t))?-1:1},Y=function(e,t){return Object(B.a)(e.measurements.measurements.filter(function(e){return e.userId===t})).sort(function(e,t){return W(e.date,t.date)})},G=a(63),H=a(135),J=a.n(H),V=a(29),q=a.n(V),z=(a(250),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).state={currentRange:"month"},a.conf={year:{unit:"month",sub:"years"},month:{unit:"week",sub:"months"},week:{unit:"day",sub:"weeks"}},a.getMinDate=function(e){var t=a.getMaxDate(e),n=e.map(function(e){return e.date});n.sort(function(e,t){return W(e,t)});var r=n[0];if(r=U()(r).subtract(1,"days"),void 0!==t){var s=U()(t).subtract(1,"days").subtract(1,a.conf[a.state.currentRange].sub);return r.isBefore(s)?s:r}},a.getMaxDate=function(e){var t=e.map(function(e){return e.date});t.sort(function(e,t){return W(e,t)});var a=t.slice(-1)[0];if(void 0!==(a=U()(a).add(1,"days")))return a},a.updateGraph=function(e){a.chart.data.datasets=a.chart.data.datasets.map(function(t){var n=e.measurements.map(function(e){return{x:U()(e.date),y:e.weight}}).filter(function(e){var t=U()().subtract(1,a.conf[a.state.currentRange].sub);return U()(e.x).isAfter(t)});return Object(G.a)({},t,{data:n})}),a.chart.options.scales.xAxes[0].time.unit=a.conf[a.state.currentRange].unit,a.chart.options.scales.xAxes[0].time.min=a.getMinDate(e.measurements),a.chart.options.scales.xAxes[0].time.max=a.getMaxDate(e.measurements),a.chart.update()},a.setRange=function(e){a.setState({currentRange:e},function(){return a.updateGraph(a.props)})},a.setWeek=function(){a.setRange("week")},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.measurements,t=document.getElementById("myChart").getContext("2d");this.chart=new J.a(t,{type:"line",data:{datasets:[{label:"My weight",xAxisID:"time",yAxisID:"weight",fill:!1,lineTension:0,borderWidth:2,pointRadius:5,backgroundColor:"rgba(255, 99, 132, .5)",borderColor:"rgb(255, 99, 132)",data:e.map(function(e){return{x:U()(e.date),y:e.weight}})}]},options:{responsive:!0,aspectRatio:0,maintainAspectRatio:!1,title:{display:!0,text:"Weight graph"},tooltips:{intersect:!1,mode:"index",callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].label||"";return a&&(a+=": "),a+=parseFloat(e.value).toFixed(2),a}}},scales:{xAxes:[{id:"time",type:"time",display:!0,distribution:"linear",time:{min:this.getMinDate(e),max:this.getMaxDate(e),unit:this.conf[this.state.currentRange].unit},ticks:{source:"auto",autoSkip:!0},scaleLabel:{display:!0,labelString:"Dates"}}],yAxes:[{id:"weight",type:"linear",scaleLabel:{display:!0,labelString:"Weight in kgs"}}]}}})}},{key:"componentWillReceiveProps",value:function(e){this.updateGraph(e)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"Graph"},i.a.createElement(q.a,{color:"primary",variant:"week"===this.state.currentRange?"outlined":"text",onClick:this.setWeek},"Week"),i.a.createElement(q.a,{color:"primary",variant:"month"===this.state.currentRange?"outlined":"text",onClick:function(){e.setRange("month")}},"Month"),i.a.createElement(q.a,{color:"primary",variant:"year"===this.state.currentRange?"outlined":"text",onClick:function(){e.setRange("year")}},"Year"),i.a.createElement("canvas",{height:"100%",width:"100%",id:"myChart"}))}}]),t}(s.Component)),K=Object(M.b)(function(e,t){return{measurements:Y(e,t.userId)}})(z),Q=function(e,t){return Object(B.a)(e.measurements.measurements.filter(function(e){return e.userId===t})).sort(function(e,t){return W(t.date,e.date)})},X=a(47),Z=a.n(X),$=function(e){return e.addMeasurement.addingMeasurement},ee=function(e,t){return Object(B.a)(e.measurements.measurements.filter(function(e){return e.userId===t})).sort(function(e,t){return W(e,t)})},te=a(86),ae=a.n(te),ne=a(138),re=a.n(ne),se=a(136),ie=a.n(se),ce=a(137),ue=a.n(ce),le=a(87),oe=a.n(le),me=a(88),de=a.n(me),he=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).state={weight:"",date:U()().format("YYYY-MM-DD[T]HH:mm:ss"),lostMuchWeight:!1,lostMuchWeightDialogShown:!1},a.handleClose=function(){(0,a.props.toggleMeasurementDialog)(!1),a.setState({weight:""})},a.addMeasurement=function(){var e=a.props.addMeasurement;if(""!==a.state.weight&&U()(a.state.date).isBefore(U()())){var t={userId:a.props.match.params.id,weight:a.state.weight,date:U()(a.state.date)};e(t),a.checkLostMuchWeight(t)&&a.setState({lostMuchWeight:!0}),a.setState({weight:""})}},a.checkLostMuchWeight=function(e){var t=a.props.measurements,n=[].concat(Object(B.a)(t),[e]).sort(function(e,t){return W(e.date,t.date)});return 0!==n.length&&parseInt(n[0].weight,10)-parseInt(e.weight,10)>=5},a.onWeightChange=function(e){a.setState({weight:e.currentTarget.value})},a.onDateChange=function(e){a.setState({date:e.currentTarget.value})},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t={max:U()().format("YYYY-MM-DD")},a=""===this.state.weight||this.state.weight<1||U()(this.state.date).isAfter(U()()),n=this.props.addingMeasurement;return i.a.createElement(i.a.Fragment,null,i.a.createElement(ae.a,{open:n,onClose:this.handleClose},i.a.createElement(oe.a,null,"Subscribe"),i.a.createElement(ie.a,null,i.a.createElement(ue.a,null,"Add new measurement"),i.a.createElement(de.a,{autoFocus:!0,label:"Weight(kg)",value:this.state.weight,onChange:this.onWeightChange,pattern:"[0-9]*",inputMode:"numeric",type:"number"}),i.a.createElement(de.a,{label:"Date",type:"datetime-local",onChange:this.onDateChange,defaultValue:U()().format("YYYY-MM-DD[T]HH:mm:ss"),inputProps:t})),i.a.createElement(re.a,null,i.a.createElement(q.a,{onClick:this.handleClose,color:"primary"},"Cancel"),i.a.createElement(q.a,{onClick:function(){return e.addMeasurement()},color:"primary",disabled:a},"Add measurement"))),i.a.createElement(ae.a,{open:this.state.lostMuchWeight&&!this.state.lostMuchWeightDialogShown},i.a.createElement(oe.a,null,"Way to go! You've lost 5 kgs!"),i.a.createElement(q.a,{onClick:function(){return e.setState({lostMuchWeight:!1,lostMuchWeightDialogShown:!0})},color:"primary"},"Close")))}}]),t}(s.Component),pe=function(e){return{type:"TOGGLE_MEASUREMENT_DIALOG",payload:e}},ge=a(28),fe={toggleMeasurementDialog:pe,addMeasurement:function(e){return{type:"ADD_MEASUREMENT",payload:e}}},be=Object(M.b)(function(e,t){return{addingMeasurement:$(e),measurements:ee(e,t.userId)}},fe)(Object(ge.d)(he)),Ee=a(33),ye=a(139),ve={isFetching:!1,users:[],usersTotal:0,loadedPages:[]};var Me={measurements:[]};var ke={addingMeasurement:!1};var Oe=[Object(Ee.a)(ye.a)],Ce=Object(Ee.c)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LIST_SET":return{isFetching:!1,users:[].concat(Object(B.a)(e.users),Object(B.a)(t.payload.users)),loadedPages:[].concat(Object(B.a)(e.loadedPages),[t.payload.loadedPages]).sort(),usersTotal:t.payload.usersTotal};case"USER_LIST_FETCHING":return Object(G.a)({},e,{isFetching:t.payload});default:return e}},measurements:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MEASUREMENT":return{measurements:[].concat(Object(B.a)(e.measurements),[t.payload])};case"DELETE_MEASUREMENT":return{measurements:e.measurements.filter(function(e){return e.userId!==t.payload.userId||e.date!==t.payload.date})};case"DELETE_ALL_MEASUREMENTS":return{measurements:e.measurements.filter(function(e){return e.userId!==t.payload.userId})};default:return e}},addMeasurement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_MEASUREMENT_DIALOG":return{addingMeasurement:t.payload};default:return e}}}),je=Object(Ee.e)(Ce,Ee.d.apply(void 0,Oe)),we=(a(310),a(43)),xe=a.n(we),_e=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).state={page:1,perPage:5},a.handleFirstPageButtonClick=function(){a.setState({page:1})},a.handleBackButtonClick=function(){var e=a.state.page-1;a.setState({page:e})},a.handleNextButtonClick=function(){var e=a.state.page+1;a.setState({page:e})},a.handleLastPageButtonClick=function(){var e=a.props.measurementsTotal,t=Math.ceil(e/a.state.perPage);a.setState({page:t})},a.addNewMeasurement=function(){je.dispatch(pe(!0))},a.deleteMeasurement=function(e,t){(0,a.props.deleteMeasurement)({userId:e,date:t})},a.deleteAllMeasurements=function(e){(0,a.props.deleteAllMeasurements)({userId:e})},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.userId,r=t.measurements,s=t.measurementsTotal,c=Object(B.a)(r).slice((this.state.page-1)*this.state.perPage,this.state.perPage*this.state.page).map(function(t,a){return i.a.createElement("div",{key:a,className:"Measurements__measurement"},i.a.createElement("data",{value:t.weight,className:"Measurements__weight"},t.weight," kg"),i.a.createElement("time",{className:"Measurements__time"},U()(t.date).format("MMMM DD YYYY, HH:mm:ss A")),i.a.createElement(Z.a,{color:"primary",variant:"contained",className:"Measurements__deleteButton",onClick:function(){return e.deleteMeasurement(n,t.date)}},"Delete"))});return i.a.createElement("article",{className:"Measurements"},i.a.createElement("h2",{className:"Measurements__title"},"List of Weights"),i.a.createElement(Z.a,{color:"primary",variant:"contained",onClick:this.addNewMeasurement,className:a.button},"Add New Entry"),i.a.createElement(Z.a,{color:"secondary",variant:"contained",onClick:function(){return e.deleteAllMeasurements(n)},disabled:0===s,className:a.button},"Clear"),i.a.createElement(be,{userId:n}),c,i.a.createElement("nav",{className:"Measurements__pagination"},i.a.createElement(xe.a,{onClick:this.handleFirstPageButtonClick,disabled:1===this.state.page,"aria-label":"First Page"},i.a.createElement(_.a,null)),i.a.createElement(xe.a,{onClick:this.handleBackButtonClick,disabled:1===this.state.page,"aria-label":"Previous Page"},i.a.createElement(P.a,null)),i.a.createElement(xe.a,{onClick:this.handleNextButtonClick,disabled:0===s||this.state.page===Math.ceil(s/this.state.perPage),"aria-label":"Next Page"},i.a.createElement(D.a,null)),i.a.createElement(xe.a,{onClick:this.handleLastPageButtonClick,disabled:0===s||this.state.page===Math.ceil(s/this.state.perPage),"aria-label":"Last Page"},i.a.createElement(N.a,null))))}}]),t}(s.Component),Se=a(41),Pe={deleteMeasurement:function(e){return{type:"DELETE_MEASUREMENT",payload:e}},deleteAllMeasurements:function(e){return{type:"DELETE_ALL_MEASUREMENTS",payload:e}}},Te=Object(M.b)(function(e,t){return{measurements:Q(e,t.userId),measurementsTotal:Q(e,t.userId).length}},Pe)(Object(Se.withStyles)(function(e){return{button:{marginRight:e.spacing.unit}}})(_e)),De=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.match.params.id;return i.a.createElement(i.a.Fragment,null,i.a.createElement(K,{userId:e}),i.a.createElement(Te,{userId:e}))}}]),t}(s.Component),Le=Object(ge.d)(De),Ne=a(140),Ae=a.n(Ne),Ie=a(82),Re=a.n(Ie),Be=(a(311),function(e){return i.a.createElement(k.b,Object.assign({to:"/users"},e))}),Fe=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("article",{className:"Landing"},i.a.createElement("h1",{className:"Landing__title"},"Weight Tracker App"),i.a.createElement(q.a,{component:Be,color:"primary",variant:"contained"},"Start"))}}]),t}(s.Component),Ue=Object(Se.createMuiTheme)({palette:{primary:Ae.a,secondary:Re.a},typography:{useNextVariants:!0}}),We=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement(Se.MuiThemeProvider,{theme:Ue},i.a.createElement(M.a,{store:je},i.a.createElement(k.a,{basename:"/weight-app"},i.a.createElement(i.a.Fragment,null,i.a.createElement(ge.a,{path:"/",exact:!0,component:Fe}),i.a.createElement(ge.a,{path:"/users",exact:!0,component:R}),i.a.createElement(ge.a,{path:"/users/:id",exact:!0,component:Le})))))}}]),t}(s.Component);r.a.render(i.a.createElement(We,null),document.getElementById("root"))}},[[141,1,2]]]);
//# sourceMappingURL=main.23c33825.chunk.js.map